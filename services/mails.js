const nodemailer = require("nodemailer");
exports.sendMail = async (user, password) => {
  let transporter = nodemailer.createTransport({
    host: "smtp.gmail.com",
    port: 465,
    secure: true, // use TLS
    auth: {
      user: "mauriziovol16@gmail.com",
      pass: "jajaja12",
    },
    tls: {
      // do not fail on invalid certs
      rejectUnauthorized: false,
    },
  });

  // send mail with defined transport object
  let info = await transporter.sendMail({
    from: '"Fred Foo üëª" <foo@example.com>', // sender address
    to: "maurovolpe18@gmail.com", // list of receivers
    subject: "Hello ‚úî", // Subject line
    text: "Hello world?", // plain text body
    html: `<!doctype html><html xmlns="http://www.w3.org/1999/xhtml" xmlns:v="urn:schemas-microsoft-com:vml" xmlns:o="urn:schemas-microsoft-com:office:office"><head> <title></title> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1"> <style type="text/css"> #outlook a{padding: 0;}body{margin: 0; padding: 0; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%;}table, td{border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt;}img{border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; -ms-interpolation-mode: bicubic;}p{display: block; margin: 13px 0;}</style><!--[if mso]> <noscript> <xml> <o:OfficeDocumentSettings> <o:AllowPNG/> <o:PixelsPerInch>96</o:PixelsPerInch> </o:OfficeDocumentSettings> </xml> </noscript><![endif]--><!--[if lte mso 11]> <style type="text/css"> .mj-outlook-group-fix{width:100% !important;}</style><![endif]--> <link href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,500,700" rel="stylesheet" type="text/css"> <style type="text/css"> @import url(https://fonts.googleapis.com/css?family=Ubuntu:300,400,500,700); </style> 
    <style type="text/css"> @media only screen and (min-width:480px){.mj-column-per-100{width: 100% !important; max-width: 100%;}}</style> <style media="screen and (min-width:480px)"> .moz-text-html .mj-column-per-100{width: 100% !important; max-width: 100%;}</style> <style type="text/css"> @media only screen and (max-width:480px){table.mj-full-width-mobile{width: 100% !important;}td.mj-full-width-mobile{width: auto !important;}}</style></head><body style="word-spacing:normal;background-color:#F2F5F8;"> <div style="background-color:#F2F5F8;"> <div style="background:#F2F5F8;background-color:#F2F5F8;margin:0px auto;max-width:600px;"> <table align="center" border="0" cellpadding="0" cellspacing="0" role="presentation" style="background:#F2F5F8;background-color:#F2F5F8;width:100%;"> <tbody> <tr> <td style="direction:ltr;font-size:0px;padding:20px 0;padding-bottom:20px;padding-top:30px;text-align:center;"> 
    <div class="mj-column-per-100 mj-outlook-group-fix" style="font-size:0px;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%;"> <table border="0" cellpadding="0" cellspacing="0" role="presentation" style="vertical-align:top;" width="100%"> <tbody> <tr> <td align="center" style="font-size:0px;padding:10px 25px;word-break:break-word;"> <table border="0" cellpadding="0" cellspacing="0" role="presentation" style="border-collapse:collapse;border-spacing:0px;"> <tbody> <tr> <td style="width:214px;"> <img height="auto" src="http://tesis.oeneika.com/logo.png" style="border:0;display:block;outline:none;text-decoration:none;height:auto;width:100%;font-size:13px;" width="214"/> </td></tr></tbody> </table> </td></tr></tbody> </table> </div></td></tr></tbody> </table> </div><div style="background:#ffffff;background-color:#ffffff;margin:0px auto;max-width:600px;"> <table align="center" border="0" cellpadding="0" cellspacing="0" role="presentation" style="background:#ffffff;background-color:#ffffff;width:100%;"> <tbody> <tr> <td style="direction:ltr;font-size:0px;padding:40px 0px;padding-bottom:0px;text-align:center;"> <div class="mj-column-per-100 mj-outlook-group-fix" style="font-size:0px;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%;"> 
    <table border="0" cellpadding="0" cellspacing="0" role="presentation" style="vertical-align:top;" width="100%"> <tbody> <tr> <td align="center" style="font-size:0px;padding:0 25px;padding-top:0px;padding-right:40px;padding-bottom:0px;padding-left:40px;word-break:break-word;"> <div style="font-family:Arial, sans-serif;font-size:13px;line-height:22px;text-align:center;color:#333333;"> <p style="line-height: 24px; margin: 0px 0 10px 0;font-size:16px; color:#151e23; font-family:Arial,sans-serif; color:#354552"><strong>${
      user.name + " " + user.surname
    }</strong> 
    te ha invitado a unirte a una c√°mara de vigilancia. Para comenzar, haga clic en el siguiente bot√≥n.</p></div></td></tr><tr> <td align="center" vertical-align="middle" style="font-size:0px;padding:10px 25px;padding-top:20px;padding-bottom:40px;word-break:break-word;"> <table border="0" cellpadding="0" cellspacing="0" role="presentation" style="border-collapse:separate;line-height:100%;"> <tr> <td align="center" bgcolor="#4191F7" role="presentation" style="border:none;border-radius:5px;cursor:auto;mso-padding-alt:15px 40px;background:#4191F7;" valign="middle"> <a href="http://localhost:4200/" style="display:inline-block;background:#4191F7;color:#FFFFFF;font-family:Ubuntu, Helvetica, Arial, sans-serif;font-size:13px;font-weight:normal;line-height:120%;margin:0;text-decoration:none;text-transform:none;padding:15px 40px;mso-padding-alt:0px;border-radius:5px;" target="_blank"> Unirse a la c√°mara de vigilancia </a> </td></tr></table> </td></tr><tr> <td align="center" style="font-size:0px;padding:0 25px;padding-top:0px;padding-right:40px;padding-bottom:0px;padding-left:40px;word-break:break-word;"> <div style="font-family:Arial, sans-serif;font-size:13px;line-height:22px;text-align:center;color:#333333;"> <p style="line-height: 24px; margin: 0px 0 20px 0;font-size:16px; color:#333333; font-family:Arial,sans-serif; color:#333333"><strong>Tus credenciales son: </strong><br><br>Correo electr√≥nico: ${
      user.email
    } <br>Contrase√±a: ${password}</p></div></td></tr><tr> <td vertical-align="top" style="font-size:0px;padding-bottom:10px;word-break:break-word;"> <div class="mj-column-per-100 mj-outlook-group-fix" style="font-size:0px;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%;"> 
    <table border="0" cellpadding="0" cellspacing="0" role="presentation" width="100%"> <tbody> <tr> <td style="vertical-align:top;padding-bottom:10px;"> <table border="0" cellpadding="0" cellspacing="0" role="presentation" style="" width="100%"> <tbody> <tr> <td align="center" style="font-size:0px;padding:10px 25px;word-break:break-word;"> <p style="border-top:solid 1px #DFE3E8;font-size:1px;margin:0px auto;width:100%;"> </p><!--[if mso | IE]><table align="center" border="0" cellpadding="0" cellspacing="0" style="border-top:solid 1px #DFE3E8;font-size:1px;margin:0px auto;width:550px;" role="presentation" width="550px" ><tr><td style="height:0;line-height:0;"> &nbsp;</td></tr></table><![endif]--> </td></tr></tbody> </table> </td></tr></tbody> </table> </div></td></tr><tr> <td align="center" style="font-size:0px;padding:0;word-break:break-word;"> <table border="0" cellpadding="0" cellspacing="0" role="presentation" style="border-collapse:collapse;border-spacing:0px;"> <tbody> <tr> <td style="width:150px;"> <a href='https:/google.com' target="_blank"> <img alt="" height="auto" src=${
      user.temp_secreto.qr
    } style="border:0;display:block;outline:none;text-decoration:none;height:auto;width:100%;font-size:13px;" width="150"/> </a> </td></tr></tbody> </table> </td></tr><tr> 
    <td align="center" style="font-size:0px;padding:0 25px;padding-top:0px;padding-right:40px;padding-bottom:0px;padding-left:40px;word-break:break-word;"> <div style="font-family:Arial, sans-serif;font-size:13px;line-height:22px;text-align:center;color:#333333;"> <p style="line-height: 24px; margin: 10px 0 40px 0;font-size:16px; color:#333333; font-family:Arial,sans-serif; color:#333333"><strong>Por √∫ltimo, escanea este c√≥digo en Google Authenticator para activar tu verificaci√≥n en 2 pasos.</p></div></td></tr></tbody> </table> </div></td></tr></tbody> </table> </div><div style="background:#F0F0F0;background-color:#F0F0F0;margin:0px auto;max-width:600px;"> <table align="center" border="0" cellpadding="0" cellspacing="0" role="presentation" style="background:#F0F0F0;background-color:#F0F0F0;width:100%;"> <tbody> <tr> <td style="direction:ltr;font-size:0px;padding:30px 0 0 0;text-align:center;"> <div class="mj-column-per-100 mj-outlook-group-fix" style="font-size:0px;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%;"> <table border="0" cellpadding="0" cellspacing="0" role="presentation" style="vertical-align:top;" width="100%"> <tbody> <tr> <td align="center" style="font-size:0px;padding:0 25px;padding-top:0px;padding-right:40px;padding-bottom:0px;padding-left:40px;word-break:break-word;"> <div style="font-family:Arial, sans-serif;font-size:13px;line-height:22px;text-align:center;color:#333333;"> <p style="line-height: 14px; margin: 0px 0 40px 0;font-size:14px; color:#333333; font-family:Arial,sans-serif; color:#333333">Sistema de videovigilancia</p></div></td></tr></tbody> </table> </div></td></tr></tbody> </table> </div></div></body></html>`,
  });

  console.log("Message sent: %s", info.messageId);
  // Message sent: <b658f8ca-6296-ccf4-8306-87d57a0b4321@example.com>

  // Preview only available when sending through an Ethereal account
  console.log("Preview URL: %s", nodemailer.getTestMessageUrl(info));
  // Preview URL: https://ethereal.email/message/WaQKMgKddxQDoou...
};
